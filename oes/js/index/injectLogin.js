window.L.extension.injectLogin||function(){var d,f,e={},g=[],b=document.getElementsByTagName("script"),h=function(a){window.L.cookie.set(e);window.L.AJAX({url:window.L._rootUrl+"/user.php?a=logout",async:a,type:"get"})},b=b[b.length-1];window.L.cookie.set({"user[login]":b.getAttribute("login")||""});d=b.getAttribute("sessionName");f=window.L.cookie.get(d);e[d]=f;(function(){if("1"===(b=window.L.cookie.get("user[login]"))){if(window.L.cookie.set(e,12E4),(b=(new Date).getTime())>=parseInt(window.L.cookie.get("user[lastRequestTime]")||
0)+6E4)window.L.cookie.set({"user[lastRequestTime]":b}),$.get(window.L._rootUrl+"/user.php?a=continuedLogin",function(a){"4"===a&&window.L.cookie.set({"user[login]":""})})}else void 0===b&&(window.L.cookie.set({"user[login]":""}),h(!0));setTimeout(arguments.callee,6E4)})();window.L.onEvent.addEvent(window,"beforeunload",function(){void 0===window.L.cookie.get("user[login]")&&(window.L.cookie.set({"user[login]":""}),h(!1))});window.L.extension.injectLogin=function(a,d){if(void 0!==d)"loginAfter"===
d&&(window.location.reload===a?g=[a]:g[0]!==window.location.reload&&(b=g,b[b.length]=a));else{var c,e=function(){"function"===typeof a?a({userName:window.L.cookie.get("user[username]")}):c?window.location.href=c:window.location.reload()};a&&"function"!==typeof a&&("string"===typeof a?c=window.L._rootUrl+a:"A"===a.tagName?c=a.href||void 0:(c=a.getAttribute("href"))&&(c=window.L._rootUrl+c));if("1"===(b=window.L.cookie.get("user[login]")))e();else{var f=window.L.openCom("oDialogDiv")(window.L.getText("\u767b\u5165"),
"url:get?"+window.L._rootUrl+"/index.php?a=indexDefault","auto","auto",[1,{layoutFun:function(){dialogLogin_7b42f9999c8e9012ee8c32362a6b9dcb.success=function(){window.L.cookie.set({"user[login]":"1"});setTimeout(function(){for(var a=g,b=0,c=a.length;b<c;++b)if(window.location.reload===a[b])window.location.reload();else a[b]();e()},0)}}}]);$("> .title",oDialogDiv.callBackList[f].oDialogDivObj).css("backgroundColor","#C8DEF2");void 0===b&&(window.L.cookie.set({"user[login]":""}),h(!1))}}}}();
