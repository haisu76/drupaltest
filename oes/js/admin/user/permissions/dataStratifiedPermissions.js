var dataStratifiedPermissionsObj={submit:null,zTreeInit:function(l){var f,h,i,d,e,g,k,j;d=null;e=$("#dataStratifiedPermissions");g=function(b,a,c){return!(null===c||!0===c.rootNode)};k=function(){d.editName(d.addNodes(this.treeNode,{id:"nN_"+(new Date).getTime(),pId:this.treeNode.id,name:""})[0]);return!1};j=function(b,a){"true"===a.oldData&&(f[a.id]={id:a.id,pId:a.pId,name:a.name,type:b})};f={};h={};i={};g={callback:{onRename:function(b,a,c){""===$.trim(c.name)&&window.L.openCom("tip")(window.L.getText("\u4e0d\u63a8\u8350\u5c06\u8282\u70b9\u540d\u8bbe\u4e3a\u7a7a"));
j.call(this,"update",c)},beforeRemove:function(b,a){window.L.openCom("oDialogDiv")("\u8b66\u544a",'text:\u60a8\u786e\u5b9a\u8981\u5220\u9664"'+a.name+'"\u8282\u70b9\u5417?',"auto","auto",[2,function(b){b&&(d.removeNode(a,!1),j.call(this,"delete",a))}]);return!1},onDrop:function(b,a,c){b=0;for(a=c.length;b<a;++b)j.call(this,"update",c[b])}},data:{simpleData:{enable:!0}},edit:{enable:!0,editNameSelectAll:!0,removeTitle:"",renameTitle:"",drag:{isCopy:!1,inner:g,prev:g,next:g}},view:{addHoverDom:function(b,
a){!0===a.rootNode&&($("#"+a.tId+"_edit",e).remove(),$("#"+a.tId+"_remove",e).remove());0===$("#"+a.tId+"_add",e).length&&($("<span class='button' style='background-position: -144px 0; margin-left: 2px;' id='"+a.tId+"_add'></span>").appendTo($("#"+a.tId+"_span",e)).click(k).get(0).treeNode=a)},removeHoverDom:function(b,a){$("#"+a.tId+"_add",e).remove()}}};d=window.L.openCom("zTree",{expand:["exedit","excheck"]}).init(e,g,l);dataStratifiedPermissionsObj.submit=function(){var b=d.transformToArray(d.getNodes());
h={};i={};for(var a=0,c=b.length;a<c;++a)"true"!==b[a].oldData&&(window.L.strVar(h,b[a].pId+"."+b[a].id,{id:b[a].id,pId:b[a].pId,name:b[a].name}),"true"===d.getNodeByTId(b[a].parentTId).oldData&&(i[b[a].pId]=b[a].pId));b={dOrU:{},addN:h,addNodeStartIndex:i};for(a in f)window.L.strVar(b.dOrU,f[a].pId+"."+f[a].id,f[a]);window.L.openCom("tip")(window.L.getText("\u6b63\u5728\u4fdd\u5b58,\u8bf7\u7a0d\u540e..."),!1,!1,!0);$.post("?a=dataStratifiedPermissions",window.L.param.encode(b),function(a){"1"===
a?(window.L.openCom("tip")(window.L.getText("\u64cd\u4f5c\u6210\u529f,\u5373\u5c06\u5237\u65b0"),null,!1,!0),window.setTimeout(function(){window.location.reload()},1500)):window.L.openCom("tip")(window.L.getText("\u64cd\u4f5c\u5931\u8d25,\u8bf7\u8054\u7cfb\u7ba1\u7406\u5458"))})}}};
